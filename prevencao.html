<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Prevenção - Saúde do Homem</title>
</head>
<body>

    <header>
        <h1><a href="home.html">Guia da Saúde do Homem</a></h1>
        <nav>
            <ul>
                <li><a href="home.html">Início</a></li>
                <li><a href="prevencao.html">Prevenção</a></li>
                <li><a href="saude-mental.html">Saúde Mental</a></li>
                <li><a href="checklist.html">Checklist e Desafios</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="container-prevencao"> 
            
            <h1>Prevenção e Acompanhamento</h1>

            <div class="intro-section">
                <p>A prevenção é o melhor caminho. Nesta seção, focamos no gerenciamento ativo da sua saúde, com guias de exames e dicas para suas consultas.</p>
            </div>

            <section class="card-topico" id="calendario">
                <div class="card-header">
                    <h2>Calendário de Exames</h2>
                </div>
                <p>A frequência dos exames muda com a idade. Este é um guia geral, mas **sempre consulte seu médico** para um melhor entendimento da sua situação:</p>
                
                <ul class="checklist-items">
                    <li>
                        <strong>Anualmente (Check-up Geral):</strong>
                        <p class="item-description">Pressão arterial, Glicemia (diabetes), Colesterol (perfil lipídico) e Exame de urina. Ideal para todas as idades adultas.</p>
                    </li>
                    <li>
                        <strong>A partir dos 45-50 anos (Intestino):</strong>
                        <p class="item-description">Colonoscopia ou outros exames para rastreio de câncer colorretal. A frequência pode variar (a cada 5 ou 10 anos).</p>
                    </li>
                    <li>
                        <strong>A partir dos 40-50 anos (Próstata):</strong>
                        <p class="item-description">Discussão com seu médico sobre o exame de PSA (sangue) e o exame de toque retal.</p>
                    </li>
                    <li>
                        <strong>Mensal (Autoexame):</strong>
                        <p class="item-description">Autoexame dos testículos (no banho) para detecção de nódulos e autoexame da pele para manchas ou pintas suspeitas.</p>
                    </li>
                </ul>
                <a href="checklist.html" class="btn btn-primary">Ver exames essenciais</a>
            </section>

            <section class="card-topico" id="consultas">
                <div class="card-header">
                    <h2>Lembretes para sua Consulta</h2>
                </div>
                <p>Tire o máximo proveito do seu tempo com o profissional de saúde. Não tenha vergonha de perguntar!</p>
                
                <ul class="checklist-items">
                    <li>
                        <strong>Anote suas Dúvidas:</strong>
                        <p class="item-description">Leve uma lista de perguntas, sintomas ou preocupações. Não confie apenas na memória.</p>
                    </li>
                    <li>
                        <strong>Leve Exames Anteriores:</strong>
                        <p class="item-description">Isso ajuda o médico a ter um histórico completo da sua saúde e comparar resultados.</p>
                    </li>
                    <li>
                        <strong>Seja 100% Honesto:</strong>
                        <p class="item-description">Fale abertamente sobre uso de álcool, fumo, medicamentos, vida sexual e saúde mental. O médico não está ali para julgar.</p>
                    </li>
                    <li>
                        <strong>Entenda os Próximos Passos:</strong>
                        <p class="item-description">Saia da consulta sabendo exatamente quais são os resultados, quando retornar e o que você precisa mudar no seu estilo de vida.</p>
                    </li>
                </ul>
                <a href="saude-mental.html" class="btn btn-secondary">Veja também Saúde Mental</a>
            </section>

            <section class="card-topico" id="gerenciar-lembretes">
                <div class="card-header">
                    <h2>Gerenciar Meus Lembretes</h2>
                </div>
                <p>Use esta ferramenta para agendar lembretes para os seus próximos exames.</p>

                <div id="lista-lembretes-container">
                    </div>

                <form id="lembrete-form">
                    
                    <label for="lembrete-nome">Tipo de Exame:</label>
                    <input type="text" id="lembrete-nome" placeholder="Ex: Check-up Geral, Dentista..." required>

                    <label for="lembrete-data">Data do Lembrete:</label>
                    <input type="date" id="lembrete-data" required>
                    
                    <div id="lembrete-success" class="success-text"></div>

                    <button type="submit" class="btn btn-primary">Salvar Lembrete</button>

                </form>
            </section>
            <section class="card-topico" id="sinais-alerta">
                <div class="card-header">
                    <h2>Quando me preocupar? (Sinais de Alerta)</h2>
                </div>
                <p>Atenção máxima: alguns sintomas nunca devem ser ignorados. Se você sentir qualquer um dos seguintes, procure ajuda médica imediatamente.</p>
            
                <div class="toggle-list">
                    
                    <details>
                        <summary>Dor no peito, no braço ou falta de ar súbita</summary>
                        <div class="toggle-content">
                            <p><strong>Ação Imediata:</strong> Procure atendimento de emergência (ligue 192 ou vá ao hospital). Estes são sinais clássicos de um infarto ou problema cardíaco. Não espere.</p>
                        </div>
                    </details>
            
                    <details>
                        <summary>Dificuldade para urinar ou sangue na urina</summary>
                        <div class="toggle-content">
                            <p><strong>Ação:</strong> Marque uma consulta com um urologista. Isso pode indicar problemas na próstata, infecções ou outras condições sérias. Não é "normal" do envelhecimento.</p>
                        </div>
                    </details>
            
                    <details>
                        <summary>Mudança em pintas ou manchas na pele</summary>
                        <div class="toggle-content">
                            <p><strong>Ação:</strong> Consulte um dermatologista. Mudanças na cor, formato, tamanho ou borda de uma pinta são sinais de alerta para o câncer de pele.</p>
                        </div>
                    </details>

                    <details>
                        <summary>Perda de peso rápida e inexplicada</summary>
                        <div class="toggle-content">
                            <p><strong>Ação:</strong> Agende um check-up com seu médico. Perder peso sem tentar pode ser um sinal de diversas condições subjacentes, incluindo diabetes ou câncer.</p>
                        </div>
                    </details>

                </div>
            </section>

        </section> </main>
    <div class="accessibility-fixed-btn">
        <div class="switch">
            <label 
                for="switch-button"
                class="switch__label">
                Modo Noturno
            </label>
            <button
                id="switch-button" 
                class="switch__button"
                role="switch"
                aria-checked="false">
                <span class="button__text--on">on</span>
                <span class="button__text--off">off</span>
            </button>
        </div>
    </div>
    
    <script src="accessibility.js" defer></script>
    <script>
        // 1. Seleciona os elementos do formulário e da lista
        const lembreteForm = document.getElementById('lembrete-form');
        const lembreteNomeInput = document.getElementById('lembrete-nome');
        const lembreteDataInput = document.getElementById('lembrete-data');
        const lembreteSuccess = document.getElementById('lembrete-success');
        const listaContainer = document.getElementById('lista-lembretes-container');

        // 2. Função para formatar a data (AAAA-MM-DD -> DD/MM/AAAA)
        function formatarData(data) {
            const [ano, mes, dia] = data.split('-');
            return `${dia}/${mes}/${ano}`;
        }

        // 3. Função para adicionar um item de lembrete na tela
        function adicionarLembreteNaTela(nome, data) {
            const dataFormatada = formatarData(data);

            const divLembrete = document.createElement('div');
            divLembrete.className = 'item-lembrete';
            
            // Guarda os dados no elemento (para ser fácil de apagar)
            divLembrete.dataset.nome = nome;
            divLembrete.dataset.data = data;

            divLembrete.innerHTML = `
                <div class="item-lembrete-texto">
                    <strong>${nome}</strong>
                    <span>${dataFormatada}</span>
                </div>
                <button class="item-lembrete-apagar" title="Apagar lembrete">X</button>
            `;

            // Adiciona o novo lembrete à lista na tela
            listaContainer.appendChild(divLembrete);
        }

        // 4. Função para carregar lembretes do localStorage
        function carregarLembretes() {
            const lembretesSalvos = JSON.parse(localStorage.getItem('meusLembretes')) || [];
            listaContainer.innerHTML = ''; // Limpa a lista antes de carregar
            lembretesSalvos.forEach(lembrete => {
                adicionarLembreteNaTela(lembrete.nome, lembrete.data);
            });
        }

        // 5. Função para salvar o lembrete no localStorage
        function salvarLembrete(nome, data) {
            const lembretesSalvos = JSON.parse(localStorage.getItem('meusLembretes')) || [];
            lembretesSalvos.push({ nome: nome, data: data });
            localStorage.setItem('meusLembretes', JSON.stringify(lembretesSalvos));
        }

        // 6. Função para apagar o lembrete
        function apagarLembrete(nome, data) {
            let lembretesSalvos = JSON.parse(localStorage.getItem('meusLembretes')) || [];
            // Filtra o array, removendo o item que queremos apagar
            lembretesSalvos = lembretesSalvos.filter(l => l.nome !== nome || l.data !== data);
            // Salva o novo array (sem o item)
            localStorage.setItem('meusLembretes', JSON.stringify(lembretesSalvos));
            // Recarrega a lista na tela
            carregarLembretes();
        }

        // 7. Event Listener do Formulário (O que acontece ao clicar em "Salvar")
        lembreteForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Impede a página de recarregar

            // Pega os valores
            const nome = lembreteNomeInput.value;
            const data = lembreteDataInput.value;

            // Adiciona na tela
            adicionarLembreteNaTela(nome, data);
            
            // Salva no localStorage
            salvarLembrete(nome, data);

            // Mostra a mensagem de sucesso
            lembreteSuccess.textContent = '✅ Lembrete salvo com sucesso!';
            lembreteSuccess.style.display = 'block';
            lembreteForm.reset(); // Limpa o formulário

            setTimeout(() => {
                lembreteSuccess.style.display = 'none';
            }, 4000);
        });

        // 8. Event Listener para os botões de APAGAR
        listaContainer.addEventListener('click', (event) => {
            // Verifica se o clique foi no botão de apagar
            if (event.target.classList.contains('item-lembrete-apagar')) {
                const item = event.target.closest('.item-lembrete');
                const nome = item.dataset.nome;
                const data = item.dataset.data;
                apagarLembrete(nome, data);
            }
        });

        // 9. CARREGA TUDO: Chama a função para carregar os lembretes assim que a página abre
        carregarLembretes();

    </script>

</body>
</html>